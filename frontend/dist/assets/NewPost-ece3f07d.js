import{_ as S,r as s,w as V,c as k,d as m,e as _,k as C,i as v,f as e,B as g,C as b,h as y,l as N,n as w,F as B,b as U,z as c,q as F,s as L,L as P}from"./index-cee0335a.js";import{E as R}from"./Editor-381e5883.js";import{s as E}from"./slugify-5345872c.js";const i=n=>(F("data-v-0f853815"),n=n(),L(),n),z={class:"add-container"},D=i(()=>e("h2",{style:{"text-align":"center","padding-top":"2rem"}},"Tạo bài viết mới",-1)),H={class:"mb-3"},M=i(()=>e("label",{for:"",class:"form-label"},"Tiêu đề",-1)),j={class:"mb-3"},q=i(()=>e("label",{for:"",class:"form-label"},"Slug",-1)),G={class:"mb-3 thumbnail"},A=i(()=>e("label",{for:"formFile",class:"form-label"},"Hình thu nhỏ",-1)),X={style:{width:"20rem","margin-top":"1rem"}},J=["src"],K={style:{width:"12rem",display:"flex","flex-direction":"row","align-items":"center"}},Q={key:0,style:{color:"rgb(0, 102, 255)"},class:"fa-regular fa-paper-plane"},W=i(()=>e("div",{class:"mt-10 mb-2"},null,-1)),Y={__name:"NewPost",setup(n){const r=s(!0),d=s(!1),h=s(),u=s(),p=s(),f=s();function T(t){return E(t,{locale:"vi",lower:!0})}let a=s();V(u,t=>{a.value=T(t)});function x(t){t.target.files.length&&(h.value=URL.createObjectURL(t.target.files[0])),f.value=t.target.files[0]}function I(){d.value=!0;const t=new FormData;t.append("postTitle",u.value),t.append("postThumbnail",f.value),t.append("postContent",p.value),t.append("publishState",r.value),t.append("postSlug",a.value),U.post("/admin/post",t,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{if(l.status==200)c.info("Thêm bài viết thành công",{autoClose:2e3,theme:"colored",position:c.POSITION.BOTTOM_RIGHT}),d.value=!1;else if(l.status==404)throw new Error(l.status)}).catch(l=>{d.value=!1,c.error("Lỗi "+l+" , đảm bảo là bạn đã điền đủ thông tin, hãy đợi 1p rồi submit lại hoặc là reload lại trang",{autoClose:1e3,theme:"colored",position:c.POSITION.BOTTOM_RIGHT})})}return(t,l)=>{const O=k("v-switch");return m(),_(B,null,[d.value?(m(),C(P,{key:0})):v("",!0),e("div",z,[D,e("div",H,[M,g(e("input",{type:"text",class:"form-control",id:"",placeholder:"","onUpdate:modelValue":l[0]||(l[0]=o=>u.value=o)},null,512),[[b,u.value]])]),e("div",j,[q,g(e("input",{type:"text",class:"form-control",id:"",placeholder:"","onUpdate:modelValue":l[1]||(l[1]=o=>N(a)?a.value=o:a=o)},null,512),[[b,y(a)]])]),e("div",G,[A,e("input",{class:"form-control",accept:"image/*",type:"file",id:"formFile",onChange:x},null,32),e("div",X,[e("img",{src:h.value,alt:"",style:{width:"100%"}},null,8,J)])]),e("div",K,[w(O,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=o=>r.value=o),label:"Xuất bản luôn",color:"info",style:{"margin-right":"1rem"},"hide-details":""},null,8,["modelValue"]),r.value?(m(),_("i",Q)):v("",!0)]),e("div",null,[w(y(R),{style:{height:"50rem"},modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=o=>p.value=o),"api-key":"8gzqmdnsiplu2pd33s0doas4xo8735024fznwlgttd4ldri6",init:{plugins:"  lists advlist link image table code help wordcount autosave emoticons",toolbar:" forecolor backcolor | undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | emoticons"}},null,8,["modelValue"])]),W,e("div",{onClick:I,class:"btn btn-success",style:{"margin-top":"1rem",right:"0",float:"right"}}," Add post ")])],64)}}},te=S(Y,[["__scopeId","data-v-0f853815"]]);export{te as default};
