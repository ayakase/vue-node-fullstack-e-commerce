import{_ as k,r as a,u as C,o as S,b as f,a as U,c as h,d as g,l as B,m as b,e,f as y,v as T,k as w,z as E,F as N,G as p,s as P,x as F,L}from"./index-4e6a6190.js";import{E as R}from"./Editor-6e6e3170.js";import"./slugify-416eb427.js";const s=n=>(P("data-v-96936fa5"),n=n(),F(),n),M={class:"add-container"},z=s(()=>e("h2",{style:{"text-align":"center","padding-top":"2rem"}},"Chỉnh sửa bài viết",-1)),D={class:"mb-3"},G=s(()=>e("label",{for:"",class:"form-label"},"Tiêu đề",-1)),H={class:"mb-3"},j=s(()=>e("label",{for:"",class:"form-label"},"Slug",-1)),q={class:"mb-3 thumbnail"},X=s(()=>e("label",{for:"formFile",class:"form-label"},"Hình thu nhỏ",-1)),A={style:{width:"20rem","margin-top":"1rem"}},J=["src"],K={style:{width:"12rem",display:"flex","flex-direction":"row","align-items":"center"}},Q={key:0,style:{color:"rgb(0, 102, 255)"},class:"fa-regular fa-paper-plane"},W=s(()=>e("div",{class:"mt-10 mb-2"},null,-1)),Y={__name:"EditPost",setup(n){const i=a(!0),d=a(!1),m=a(),r=a(),u=a(),v=a(),_=a(),x=C(),c=a();S(()=>{f.get("/admin/each-post/initial/"+x.params.slug).then(t=>{r.value=t.data.title,u.value=t.data.content,c.value=t.data.slug,_.value=t.data.id,m.value=t.data.thumbnail})});function I(t){t.target.files.length&&(m.value=URL.createObjectURL(t.target.files[0])),v.value=t.target.files[0]}function O(){d.value=!0;const t=new FormData;t.append("postTitle",r.value),t.append("postThumbnail",v.value),t.append("postContent",u.value),t.append("publishState",i.value),t.append("postSlug",c.value),f.put("/admin/post/edit/"+_.value,t,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{d.value=!1,p.success("Đã nhận thông tin",{autoClose:2e3,theme:"colored",position:p.POSITION.BOTTOM_RIGHT})}).catch(l=>{console.error(l),d.value=!1,p.error("Lỗi "+l+" , đảm bảo là bạn đã điền đủ thông tin, hãy đợi 1p rồi submit lại hoặc là reload lại trang",{autoClose:2e3,theme:"colored",position:p.POSITION.BOTTOM_RIGHT})})}return(t,l)=>{const V=U("v-switch");return h(),g(N,null,[d.value?(h(),B(L,{key:0})):b("",!0),e("div",M,[z,e("div",D,[G,y(e("input",{type:"text",class:"form-control",id:"",placeholder:"","onUpdate:modelValue":l[0]||(l[0]=o=>r.value=o)},null,512),[[T,r.value]])]),e("div",H,[j,y(e("input",{type:"text",class:"form-control",id:"",placeholder:"","onUpdate:modelValue":l[1]||(l[1]=o=>c.value=o)},null,512),[[T,c.value]])]),e("div",q,[X,e("input",{class:"form-control",accept:"image/*",type:"file",id:"formFile",onChange:I},null,32),e("div",A,[e("img",{src:m.value,alt:"",style:{width:"100%"}},null,8,J)])]),e("div",K,[w(V,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=o=>i.value=o),label:"Xuất bản luôn",color:"info",style:{"margin-right":"1rem"},"hide-details":""},null,8,["modelValue"]),i.value?(h(),g("i",Q)):b("",!0)]),e("div",null,[w(E(R),{style:{height:"50rem"},modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value=o),"api-key":"8gzqmdnsiplu2pd33s0doas4xo8735024fznwlgttd4ldri6",init:{plugins:"  lists advlist link image table code help wordcount autosave emoticons",toolbar:" forecolor backcolor | undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | emoticons"}},null,8,["modelValue"])]),W,e("div",{onClick:O,class:"btn btn-success",style:{"margin-top":"1rem",right:"0",float:"right"}}," Nộp bản chỉnh sửa ")])],64)}}},et=k(Y,[["__scopeId","data-v-96936fa5"]]);export{et as default};
