import{u as z}from"./index-409aa9b5.js";import{_ as D,r as o,w as F,o as q,b as f,c as y,d as s,e as u,h as n,k as B,i as E,f as e,n as v,p as b,l as G,g as S,t as w,F as x,j as O,z as k,q as H,s as P,L as K}from"./index-87fb46f9.js";const I=g=>(H("data-v-87c22bd4"),g=g(),P(),g),A={class:"library-container"},J={class:"images-section"},Q={style:{display:"flex","flex-direction":"row",gap:"2rem",width:"80%"}},W=I(()=>e("i",{class:"fa-solid fa-cloud-arrow-up"},null,-1)),X=I(()=>e("div",null,[e("p",null,"Chỉ nhận định dạng .png, .jpg, .jpeg, .gif, .webp. Mỗi lần tải lên không quá 10 files để đảm bảo đường truyền")],-1)),Y={class:"image-grid"},Z={class:"d-flex align-center justify-center fill-height"},$={class:"button-container"},ee={key:0},ae={key:1},te={class:"action-section"},le=I(()=>e("h3",null,"URL",-1)),se=["value"],oe=I(()=>e("button",{class:"btn btn-success",style:{"justify-self":"end","align-self":"end","font-size":"x-large"}},[e("i",{class:"fa-regular fa-copy"})],-1)),ne={class:"d-flex align-center justify-center fill-height"},ce={__name:"ImageLibrary",setup(g){const T=o(null),U=z(T);F(U,(t,a)=>{t===!0&&(V.value=!0,f.get("/admin/library/"+h.value).then(r=>{i.value=!1,console.log(r.data.next_cursor),c.value=c.value.concat(r.data.resources),h.value=r.data.next_cursor,p.value=r.data.total_count,m.value=c.value.length}).catch(r=>{console.log(r)}))});let c=o(),d=o([]),i=o(!1),V=o(!1),_=o([]);function M(t){if(_.value.includes(t)){let a=_.value.indexOf(t);a!==-1&&_.value.splice(a,1)}else _.value.push(t)}let p=o(),m=o();function N(){i.value=!0;const t=new FormData;for(const a of d.value)t.append("images",a);f.post("/admin/library",t,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{d.value=[],i.value=!1,k.success("Đã nhận thông tin",{autoClose:2e3,theme:"colored",position:k.POSITION.BOTTOM_RIGHT})}).then(()=>{f.get("/admin/library").then(a=>{c.value=a.data.resources,h.value=a.data.next_cursor,i.value=!1,p.value=a.data.total_count,m.value=c.value.length}).catch(a=>{console.log(a)})}).catch(a=>{console.error(a),i.value=!1,k.error("Lỗi "+a+" , kiểm tra lại định dạng của files",{autoClose:2e3,theme:"colored",position:k.POSITION.BOTTOM_RIGHT})})}let h=o(null);return q(()=>{i.value=!0,f.get("/admin/library").then(t=>{i.value=!1,c.value=t.data.resources,h.value=t.data.next_cursor,p.value=t.data.total_count,m.value=c.value.length}).catch(t=>{console.log(t)})}),(t,a)=>{const r=y("v-chip"),R=y("v-file-input"),L=y("v-progress-circular"),j=y("v-img");return s(),u(x,null,[n(i)?(s(),B(K,{key:0})):E("",!0),e("div",A,[e("div",J,[e("div",Q,[v(R,{modelValue:n(d),"onUpdate:modelValue":a[0]||(a[0]=l=>G(d)?d.value=l:d=l),placeholder:"Upload your documents",label:"Ảnh",multiple:"","prepend-icon":"fa-solid fa-images",class:"image-upload"},{selection:b(({fileNames:l})=>[(s(!0),u(x,null,O(l,C=>(s(),B(r,{key:C,size:"small",label:"",color:"#006400",class:"me-2"},{default:b(()=>[S(w(C),1)]),_:2},1024))),128))]),_:1},8,["modelValue"]),e("button",{class:"btn btn-success",style:{height:"90%"},onClick:N},[S("Tải ảnh lên  "),W])]),X,e("p",null,[e("b",null,"Đang hiển thị "+w(n(m))+" trong số "+w(n(p))+" ảnh",1)]),e("div",Y,[(s(!0),u(x,null,O(n(c),l=>(s(),u("div",{key:l,class:"each-image"},[v(j,{cover:"",class:"each-image",src:l.url,onClick:C=>M(l.url)},{placeholder:b(()=>[e("div",Z,[v(L,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src","onClick"])]))),128))]),e("div",$,[e("div",{ref_key:"target",ref:T,style:{"margin-top":"10rem"}},[n(V)&&n(h)?(s(),u("h4",ee," Load thêm...")):(s(),u("h4",ae,"Không còn ảnh"))],512)])]),e("div",te,[le,e("textarea",{readonly:"",name:"",id:"",rows:"8",placeholder:"",value:n(_)},`
            `,8,se),oe,(s(!0),u(x,null,O(n(_),l=>(s(),u("div",{key:l,class:"each-image"},[v(j,{cover:"",class:"each-image",src:l},{placeholder:b(()=>[e("div",ne,[v(L,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src"])]))),128))])])],64)}}},ue=D(ce,[["__scopeId","data-v-87c22bd4"]]);export{ue as default};
