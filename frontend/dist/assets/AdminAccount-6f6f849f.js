import{_ as U,v as q,r as u,w as D,o as E,c as n,d as f,e as k,n as c,f as o,B as i,C as _,i as O,p as d,k as C,b as w,z as t,H as L,g as x,q as z,s as K}from"./index-87fb46f9.js";const m=p=>(z("data-v-854561e3"),p=p(),K(),p),Y={class:"container"},j={class:"mb-3"},F=m(()=>o("label",{for:"email",class:"form-label"},"Email",-1)),J=["readonly"],Q={class:"mb-3"},W=m(()=>o("label",{for:"username",class:"form-label"},"Tên đăng nhập",-1)),X=["readonly"],Z={class:"mb-3"},$=m(()=>o("label",{for:"password",class:"form-label"},"Mật khẩu (để trống nếu không muốn thay đổi)",-1)),ee=["readonly"],oe={key:0,class:"mb-3"},te=m(()=>o("label",{for:"password",class:"form-label"},"Mật khẩu (để trống nếu không muốn thay đổi)",-1)),ae=["readonly"],se={class:"mb-3"},le=m(()=>o("label",{for:"password",class:"form-label"},"Password",-1)),ne={__name:"AdminAccount",setup(p){const g=q();g.userInfo;const r=u(!0),v=u(g.userInfo.username),h=u(g.userInfo.email),T=u(),s=u(null),b=u(null),I=u(!1);function B(){const l={password:T.value};w.post("/admin/user/request-change",l).then(e=>{console.log(e.data),r.value=!e.data.allow,e.data.allow==!0?t.success(e.data.message,{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT}):t.error(e.data.message,{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT})}).catch(e=>{console.error(e)})}D(s,(l,e)=>{l.length>0?I.value=!0:l.length==0&&(I.value=!1)});function M(){console.log(v.value),console.log(h.value);const l={username:v.value,email:h.value};s.value===null||s.value.length===0?w.post("/admin/user/save-change",l).then(e=>{console.log(e.data),e.status==200&&t.success("Cập nhật thông tin thành công",{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT})}).catch(e=>{console.log(e)}):s.value.length>=5?s.value===b.value?(l.password=s.value,w.post("/admin/user/save-change",l).then(e=>{console.log(e.data),e.status==200&&t.success("Cập nhật thông tin thành công",{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT})}).catch(e=>{console.log(e)})):t.error("Không khớp mật khẩu",{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT}):s.value.length<=5&&t.error("Mật khẩu mới quá ngắn",{autoClose:2e3,theme:"colored",position:t.POSITION.BOTTOM_RIGHT})}return E(()=>{}),(l,e)=>{const N=n("v-avatar"),y=n("v-btn"),P=n("v-card-text"),S=n("v-card-item"),V=n("v-spacer"),H=n("v-card-actions"),A=n("v-card"),G=n("v-dialog");return f(),k("div",Y,[c(N,{class:"avatar",image:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"}),o("form",null,[o("div",j,[F,i(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),type:"email",class:"form-control",id:"email",readonly:r.value},null,8,J),[[_,h.value]])]),o("div",Q,[W,i(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),type:"text",class:"form-control",id:"username",readonly:r.value},null,8,X),[[_,v.value]])]),o("div",Z,[$,i(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),placeholder:"********",type:"password",class:"form-control",id:"password",readonly:r.value},null,8,ee),[[_,s.value]])]),I.value?(f(),k("div",oe,[te,i(o("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>b.value=a),placeholder:"********",type:"password",class:"form-control",id:"password",readonly:r.value},null,8,ae),[[_,b.value]])])):O("",!0),c(G,{"max-width":"500"},{activator:d(({props:a})=>[r.value?(f(),C(y,L({key:0},a,{color:"surface-variant",text:"Thay đổi thông tin",variant:"flat"}),null,16)):O("",!0)]),default:d(({isActive:a})=>[c(A,{title:"Nhập mật khẩu"},{default:d(()=>[c(P,null,{default:d(()=>[x(" Hệ thống cần xác nhận đó là bạn ")]),_:1}),c(S,null,{default:d(()=>[o("div",se,[le,i(o("input",{placeholder:"********","onUpdate:modelValue":e[4]||(e[4]=R=>T.value=R),type:"password",class:"form-control",id:"password"},null,512),[[_,T.value]])])]),_:1}),c(H,null,{default:d(()=>[c(V),c(y,{onClick:B,color:"green-darken-3",text:"Yêu cầu đổi thông tin"})]),_:1})]),_:1})]),_:1}),r.value?O("",!0):(f(),C(y,{key:1,onClick:M,class:"btn btn-success"},{default:d(()=>[x("Lưu thay đổi")]),_:1}))])])}}},re=U(ne,[["__scopeId","data-v-854561e3"]]);export{re as default};
